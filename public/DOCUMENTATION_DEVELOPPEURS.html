<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation DÃ©veloppeurs OTT V3.3 - HAPPLYZ MEDICAL</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        
        .nav-menu a, a {
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        body::before {
            content: 'CONFIDENTIEL - HAPPLYZ MEDICAL SAS';
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 3rem;
            color: rgba(0, 0, 0, 0.03);
            z-index: -1;
            pointer-events: none;
            white-space: nowrap;
        }
        
        @media print {
            body { display: none !important; }
        }
        
        .confidential-banner {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 1500;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            box-shadow: 0 3px 15px rgba(0,0,0,0.2);
            text-align: center;
        }
        
        .header h1 {
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header .subtitle {
            font-size: 1.4rem;
            opacity: 0.95;
            margin-top: 0.5rem;
        }
        
        .header .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            margin-top: 1rem;
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .nav-menu {
            position: sticky;
            top: 0;
            background: #2c3e50;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .nav-menu ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .nav-menu a {
            color: white;
            text-decoration: none;
            padding: 0.6rem 1.2rem;
            margin: 0.3rem;
            border-radius: 5px;
            transition: background 0.3s, transform 0.2s;
            font-size: 0.95rem;
            font-weight: 500;
        }
        
        .nav-menu a:hover {
            background: #34495e;
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .section {
            background: white;
            margin-bottom: 2rem;
            padding: 2.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section h2 {
            color: #667eea;
            font-size: 2.2rem;
            margin-bottom: 1.5rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 0.8rem;
        }
        
        .section h3 {
            color: #764ba2;
            font-size: 1.7rem;
            margin: 2rem 0 1rem 0;
        }
        
        .section h4 {
            color: #667eea;
            font-size: 1.3rem;
            margin: 1.5rem 0 0.8rem 0;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            border-left: 4px solid #667eea;
            font-size: 0.9rem;
        }
        
        code {
            background: #f4f4f4;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }
        
        .alert {
            padding: 1.2rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 5px solid;
        }
        
        .alert-success { background: #d4edda; border-color: #28a745; color: #155724; }
        .alert-warning { background: #fff3cd; border-color: #ffc107; color: #856404; }
        .alert-danger { background: #f8d7da; border-color: #dc3545; color: #721c24; }
        .alert-info { background: #d1ecf1; border-color: #17a2b8; color: #0c5460; }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 0.9rem;
            border-bottom: 1px solid #ddd;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        ul, ol { margin-left: 2rem; }
        li { margin: 0.5rem 0; }
        
        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }
        
    </style>
</head>
<body>
    <script>
        // Protection contre la copie et les fuites
        (function() {
            // DÃ©sactiver le clic droit
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // DÃ©sactiver les raccourcis clavier de copie
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey && (e.key === 'c' || e.key === 'C' || e.key === 'a' || e.key === 'A' || e.key === 's' || e.key === 'S' || e.key === 'p' || e.key === 'P' || e.key === 'u' || e.key === 'U')) || 
                    e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j' || e.key === 'C' || e.key === 'c'))) {
                    e.preventDefault();
                    alert('âš ï¸ Cette documentation est confidentielle et protÃ©gÃ©e. La copie est interdite.');
                    return false;
                }
            });
            
            // DÃ©sactiver le glisser-dÃ©poser
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
                return false;
            });
            
            // Avertissement au chargement
            window.addEventListener('load', function() {
                console.log('%câš ï¸ ATTENTION', 'color: red; font-size: 50px; font-weight: bold;');
                console.log('%cCette documentation est confidentielle et propriÃ©tÃ© de HAPPLYZ MEDICAL SAS. Toute reproduction, copie ou diffusion non autorisÃ©e est strictement interdite et peut entraÃ®ner des poursuites judiciaires.', 'color: red; font-size: 16px;');
            });
        })();
    </script>

<div class="confidential-banner">
    âš ï¸ DOCUMENTATION CONFIDENTIELLE - PROPRIÃ‰TÃ‰ DE HAPPLYZ MEDICAL SAS - TOUTE REPRODUCTION INTERDITE - BREVET EN COURS
</div>

<div class="header">
    <h1>ğŸ¥ OTT - Dispositif MÃ©dical IoT</h1>
    <div class="subtitle">Solution Enterprise de Monitoring OxygÃ©nothÃ©rapie</div>
    <div class="version-badge">Version 3.3 - Documentation DÃ©veloppeurs</div>
    <p style="margin-top: 1rem; font-size: 1.1rem;">HAPPLYZ MEDICAL SAS</p>
</div>

<nav class="nav-menu">
    <ul>
        <li><a href="#intro">ğŸ“– Introduction</a></li>
        <li><a href="#architecture">ğŸ—ï¸ Architecture</a></li>
        <li><a href="#firmware">ğŸ”§ Firmware ESP32</a></li>
        <li><a href="#api">ğŸ”Œ API Backend</a></li>
        <li><a href="#dashboard">âš›ï¸ Dashboard React</a></li>
        <li><a href="#deployment">â˜ï¸ DÃ©ploiement</a></li>
        <li><a href="#troubleshooting">ğŸ› DÃ©pannage</a></li>
    </ul>
</nav>

<div class="container">

<section id="intro" class="section">
    <h2>ğŸ“– Introduction</h2>
    
    <p style="font-size: 1.15rem; margin-bottom: 1.5rem;">
        <strong>OTT (Oxygen Therapy Tracker)</strong> est un dispositif mÃ©dical IoT complet pour le monitoring 
        en temps rÃ©el de l'oxygÃ©nothÃ©rapie Ã  domicile. Solution 100% cloud, sÃ©curisÃ©e et conforme aux normes mÃ©dicales.
    </p>
    
    <div class="alert alert-info">
        <strong>â„¹ï¸ Documentation Technique</strong><br>
        Cette documentation est rÃ©servÃ©e aux dÃ©veloppeurs autorisÃ©s. Elle contient les dÃ©tails techniques, 
        l'architecture, les APIs, le firmware et les procÃ©dures de dÃ©ploiement.
    </div>
    
    <h3>ğŸ¯ Stack Technique</h3>
    <ul>
        <li><strong>Firmware</strong> : C++ / Arduino IDE / ESP32</li>
        <li><strong>Backend</strong> : PHP 8.2 / PostgreSQL 14</li>
        <li><strong>Frontend</strong> : Next.js 14 / React / Tailwind CSS</li>
        <li><strong>Infrastructure</strong> : Render.com (API) + GitHub Pages (Dashboard)</li>
        <li><strong>Communication</strong> : 4G/LTE (SIM7600) + HTTPS</li>
    </ul>
</section>

<section id="architecture" class="section">
    <h2>ğŸ—ï¸ Architecture Technique</h2>
    
    
    <h3>ğŸ“ Vue d'Ensemble</h3>
    
    <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP32 + SIM    â”‚  â† Firmware C++
â”‚   (Dispositif)  â”‚     â€¢ Mesure capteur MPXV7007DP
â”‚                 â”‚     â€¢ Sleep profond (111j autonomie)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ POST HTTPS via 4G
         â”‚
         â”‚ 4G/LTE
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API PHP       â”‚  â† Backend Render.com
â”‚   PostgreSQL    â”‚     â€¢ JWT Authentication
â”‚   (Render.com)  â”‚     â€¢ Multi-users + Permissions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ OTA Management
         â”‚
         â”‚ REST API
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard      â”‚  â† Frontend Next.js
â”‚  React/Next.js  â”‚     â€¢ 12 pages complÃ¨tes
â”‚  (GitHub Pages) â”‚     â€¢ PWA installable
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â€¢ Animations modernes
    </pre>
    
    <h3>ğŸ” Flux de donnÃ©es</h3>
    <ul>
        <li><strong>Montant (device â†’ cloud)</strong> : le firmware mesure (dÃ©bit, batterie) toutes les 5 min, propage via HTTPS/JSON vers <code>/api.php/devices/measurements</code> et <code>/logs</code>.</li>
        <li><strong>PersistÃ©</strong> : l'API Docker (Render) Ã©crit en PostgreSQL (tables <code>devices</code>, <code>measurements</code>, <code>alerts</code>, <code>audit_logs</code>â€¦), via PDO.</li>
        <li><strong>Descendant</strong> : le Dashboard Next.js (GitHub Pages) appelle l'API (<code>NEXT_PUBLIC_API_URL</code>) pour stats, cartes, notifications, OTA.</li>
        <li><strong>Auth</strong> : Next.js poste sur <code>/api.php/auth/login</code>, stocke le JWT (LocalStorage) et <code>fetchWithAuth</code> ajoute <code>Authorization: Bearer ...</code> Ã  chaque requÃªte.</li>
    </ul>
    
    <h3>ğŸ“ Structure du Projet</h3>
    
    <div class="file-tree">
maxime/
â”œâ”€â”€ ğŸ“± FRONTEND (Next.js)
â”‚   â”œâ”€â”€ app/                      # Pages Next.js (App Router)
â”‚   â”œâ”€â”€ components/               # Composants rÃ©utilisables
â”‚   â”œâ”€â”€ contexts/                 # Contextes React (Auth, USB)
â”‚   â””â”€â”€ public/                   # Assets statiques
â”‚
â”œâ”€â”€ ğŸ”Œ BACKEND (PHP)
â”‚   â”œâ”€â”€ api.php                   # API REST complÃ¨te
â”‚   â”œâ”€â”€ sql/schema.sql            # Base PostgreSQL (14 tables)
â”‚   â””â”€â”€ Dockerfile                # Container pour Render
â”‚
â”œâ”€â”€ ğŸ”§ FIRMWARE (ESP32)
â”‚   â””â”€â”€ fw_ott_optimized/         # Firmware ESP32
â”‚
â””â”€â”€ ğŸ“š DOCUMENTATION
    â”œâ”€â”€ DOCUMENTATION_PRESENTATION.html
    â”œâ”€â”€ DOCUMENTATION_DEVELOPPEURS.html
    â””â”€â”€ DOCUMENTATION_COMMERCIALE.html
    </div>
    
</section>

<section id="firmware" class="section">
    <h2>ğŸ”§ Firmware ESP32</h2>
    
    
    <h3>ğŸ“¦ MatÃ©riel Requis</h3>
    <ul>
        <li>Carte ESP32 + Modem 4G : LILYGO TTGO T-A7670G (~40â‚¬)</li>
        <li>Capteur de pression : MPXV7007DP (~15â‚¬)</li>
        <li>Batterie Li-Ion : 18650 2000mAh (~5â‚¬)</li>
        <li>Carte SIM 4G : Free Mobile (2â‚¬/mois)</li>
    </ul>
    
    <h3>ğŸ”‹ Optimisation Autonomie</h3>
    <p>Le firmware est optimisÃ© pour une <strong>autonomie de 111 jours</strong> sur batterie 2000mAh grÃ¢ce au deep sleep ESP32.</p>
</section>

<section id="api" class="section">
    <h2>ğŸ”Œ API Backend (PHP + PostgreSQL)</h2>
    
    
    <h3>ğŸ“Š Base de DonnÃ©es PostgreSQL</h3>
    <p>Le schÃ©ma comprend <strong>14 tables</strong> : devices, patients, measurements, alerts, device_logs, users, roles, permissions, etc.</p>
    
    <h3>ğŸ” Authentification JWT</h3>
    <p>L'API utilise <strong>JWT (JSON Web Tokens)</strong> pour l'authentification avec expiration 24h.</p>
    
    <h3>ğŸŒ Endpoints API Principaux</h3>
    <ul>
        <li><code>GET/POST/PUT/DELETE /api.php/devices</code> - Gestion des dispositifs</li>
        <li><code>GET/POST/PUT/DELETE /api.php/patients</code> - Gestion des patients</li>
        <li><code>POST /api.php/measurements</code> - Enregistrement des mesures</li>
        <li><code>GET/POST /api.php/alerts</code> - Gestion des alertes</li>
        <li><code>GET/POST/PUT/DELETE /api.php/users</code> - Gestion des utilisateurs (admin only)</li>
    </ul>
</section>

<section id="dashboard" class="section">
    <h2>âš›ï¸ Dashboard React (Next.js 14)</h2>
    
    
    <h3>ğŸ¨ Technologies UtilisÃ©es</h3>
    <ul>
        <li><strong>Next.js 14</strong> - Framework React avec App Router et export statique</li>
        <li><strong>Tailwind CSS</strong> - Design system utility-first</li>
        <li><strong>Chart.js</strong> - Graphiques interactifs</li>
        <li><strong>React Context</strong> - Gestion d'Ã©tat (AuthContext, UsbContext)</li>
        <li><strong>Service Worker</strong> - PWA avec cache offline</li>
        <li><strong>Web Serial API</strong> - Communication USB directe avec les dispositifs</li>
    </ul>
    
    <h3>ğŸ“± 12 Pages ComplÃ¨tes</h3>
    <p>Le dashboard comprend 12 pages : Login, Vue d'Ensemble, Dispositifs, Patients, Alertes, Carte, Historique, Rapports, Utilisateurs, OTA, Audit, Documentation.</p>
</section>

<section id="deployment" class="section">
    <h2>â˜ï¸ DÃ©ploiement</h2>
    
    
    <h3>ğŸ“¦ Ã‰tapes de DÃ©ploiement</h3>
    <ol>
        <li>CrÃ©er la base PostgreSQL sur Render (Free)</li>
        <li>DÃ©ployer l'API PHP sur Render (Starter 7â‚¬/mois)</li>
        <li>DÃ©ployer le Dashboard Next.js sur GitHub Pages (Free)</li>
        <li>Compiler et uploader le firmware ESP32</li>
    </ol>
    
    <h3>ğŸ’° CoÃ»ts Mensuels</h3>
    <ul>
        <li>PostgreSQL (Render) : <strong>0â‚¬</strong></li>
        <li>API Backend (Render) : <strong>7â‚¬/mois</strong></li>
        <li>Dashboard (GitHub Pages) : <strong>0â‚¬</strong></li>
        <li>Carte SIM 4G : <strong>2â‚¬/dispositif/mois</strong></li>
    </ul>
</section>

<section id="troubleshooting" class="section">
    <h2>ğŸ› DÃ©pannage</h2>
    
    
    <h3>ğŸ”§ ProblÃ¨mes Courants</h3>
    <ul>
        <li><strong>Modem not responding</strong> : VÃ©rifier l'antenne 4G et la carte SIM</li>
        <li><strong>JWT verification failed</strong> : Token expirÃ©, se reconnecter</li>
        <li><strong>Failed to fetch</strong> : VÃ©rifier que l'API est en ligne et les headers CORS</li>
        <li><strong>Build Next.js Ã©choue</strong> : Supprimer le cache et rÃ©installer les dÃ©pendances</li>
    </ul>
</section>

<section id="screenshots" class="section">
    <h2>ğŸ“¸ Captures d'Ã‰cran de l'Interface</h2>
    
    <p>Cette section prÃ©sente les diffÃ©rentes vues de l'interface utilisateur et les modals disponibles dans le dashboard OTT.</p>
    
    <h3>ğŸ” Page de Connexion</h3>
    <p>La page d'authentification avec formulaire de connexion sÃ©curisÃ© :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/login.png" alt="Page de connexion" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Page de connexion avec authentification JWT</p>
    </div>
    
    <h3>ğŸ  Vue d'Ensemble (Dashboard)</h3>
    <p>La page principale avec les indicateurs clÃ©s et les graphiques :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/dashboard-overview.png" alt="Vue d'ensemble" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Vue d'ensemble avec KPI, graphiques et actions requises</p>
    </div>
    
    <h3>ğŸ”Œ Page Dispositifs</h3>
    <p>La liste des dispositifs avec leurs statuts et informations :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/devices-list.png" alt="Liste des dispositifs" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Liste des dispositifs avec recherche et filtres</p>
    </div>
    
    <h3>ğŸ¥ Page Patients</h3>
    <p>La gestion des patients avec leurs dispositifs associÃ©s :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/patients-list.png" alt="Liste des patients" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Liste des patients avec recherche, crÃ©ation, modification, assignation/dÃ©sassignation de dispositifs. Interface simplifiÃ©e sans alertes (accessibles via le modal de dÃ©tails du dispositif).</p>
    </div>
    
    <h3>ğŸ“ Carte Interactive</h3>
    <p>La visualisation gÃ©ographique des dispositifs :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/map.png" alt="Carte interactive" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Carte Leaflet avec marqueurs des dispositifs</p>
    </div>
    
    <h3>âš ï¸ Page Alertes</h3>
    <p>La liste des alertes avec leurs statuts :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/alerts.png" alt="Page alertes" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Gestion des alertes avec filtres et actions</p>
    </div>
    
    <h3>ğŸ‘¥ Page Utilisateurs</h3>
    <p>La gestion des utilisateurs et des permissions :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/users.png" alt="Page utilisateurs" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Gestion des utilisateurs avec rÃ´les, permissions, statut actif/inactif et derniÃ¨re connexion. Interface simplifiÃ©e sans alertes (accessibles via le modal de dÃ©tails dispositif).</p>
    </div>
    
    <h3>ğŸ”„ Page OTA</h3>
    <p>La gestion des mises Ã  jour OTA :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/ota.png" alt="Page OTA" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Gestion des mises Ã  jour OTA des dispositifs</p>
    </div>
    
    <h3>ğŸ“ Modals</h3>
    
    <h4>Modal CrÃ©ation/Ã‰dition Patient</h4>
    <p>Le modal pour crÃ©er ou modifier un patient :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-patient.png" alt="Modal patient" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal de crÃ©ation/Ã©dition de patient avec formulaire complet</p>
    </div>
    
    <h4>Modal DÃ©tails Dispositif</h4>
    <p>Le modal avec les dÃ©tails complets d'un dispositif :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-device-details.png" alt="Modal dÃ©tails dispositif" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal avec onglets : DÃ©tails, Alertes, Logs, Commandes, Streaming USB</p>
    </div>
    
    <h4>Modal Assignation Dispositif</h4>
    <p>Le modal pour assigner un dispositif Ã  un patient :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-assign-device.png" alt="Modal assignation" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal d'assignation d'un dispositif libre Ã  un patient</p>
    </div>
    
    <h4>Modal CrÃ©ation/Ã‰dition Utilisateur</h4>
    <p>Le modal pour crÃ©er ou modifier un utilisateur :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-user.png" alt="Modal utilisateur" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal de crÃ©ation/Ã©dition d'utilisateur avec gestion des rÃ´les</p>
    </div>
    
    <h4>Modal DÃ©sassignation Dispositif</h4>
    <p>Le modal pour dÃ©sassigner un dispositif d'un patient :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-unassign-device.png" alt="Modal dÃ©sassignation" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal de confirmation pour dÃ©sassigner un dispositif d'un patient</p>
    </div>
    
    <h4>Modal Commande Dispositif</h4>
    <p>Le modal pour envoyer une commande Ã  un dispositif :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-command.png" alt="Modal commande" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal d'envoi de commandes (SET_SLEEP_SECONDS, PING, UPDATE_CONFIG, etc.)</p>
    </div>
    
    <h4>Modal Flash USB</h4>
    <p>Le modal pour le flash USB et le streaming sÃ©rie en temps rÃ©el :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-usb-streaming.png" alt="Modal flash USB" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal de flash USB avec sÃ©lection de port sÃ©rie, choix de firmware, et terminal sÃ©rie avec filtres de logs et export</p>
    </div>
    
    <h4>Modal Upload Firmware</h4>
    <p>Le modal pour tÃ©lÃ©verser un nouveau firmware :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-upload-firmware.png" alt="Modal upload firmware" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Modal de tÃ©lÃ©versement de firmware avec version, notes et option stable/beta</p>
    </div>
    
    <h4>Modal DÃ©tails Dispositif - Onglet Alertes</h4>
    <p>L'onglet Alertes du modal de dÃ©tails dispositif :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-device-alerts.png" alt="Modal alertes dispositif" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Onglet Alertes du modal de dÃ©tails avec liste des alertes du dispositif</p>
    </div>
    
    <h4>Modal DÃ©tails Dispositif - Onglet Journal</h4>
    <p>L'onglet Journal du modal de dÃ©tails dispositif :</p>
    <div style="text-align: center; margin: 2rem 0;">
        <img src="screenshots/modal-device-logs.png" alt="Modal logs dispositif" style="max-width: 100%; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        <p class="text-sm text-gray-600" style="margin-top: 0.5rem;">Onglet Journal du modal de dÃ©tails avec historique des logs du dispositif</p>
    </div>
</section>

<section id="security" class="section">
    <h2>ğŸ”’ SÃ©curitÃ© & Permissions</h2>
    
    <h3>ğŸ›¡ï¸ SÃ©curitÃ© ComplÃ¨te de l'Application</h3>
    
    <p>L'application OTT implÃ©mente une sÃ©curitÃ© multi-niveaux pour protÃ©ger les donnÃ©es mÃ©dicales sensibles et garantir l'intÃ©gritÃ© du systÃ¨me.</p>
    
    <h4>1. ğŸ” Authentification et Autorisation</h4>
    
    <ul>
        <li><strong>JWT (JSON Web Tokens)</strong> : Tokens signÃ©s avec HMAC-SHA256, expiration 24h, vÃ©rification cÃ´tÃ© serveur</li>
        <li><strong>Passwords hashÃ©s</strong> : Bcrypt avec cost 10, jamais stockÃ©s en clair</li>
        <li><strong>SystÃ¨me de permissions</strong> : RÃ´les (admin, mÃ©decin, technicien) avec permissions granulaires</li>
        <li><strong>VÃ©rification d'activitÃ©</strong> : Seuls les utilisateurs actifs peuvent se connecter</li>
        <li><strong>Audit des connexions</strong> : Toutes les tentatives de connexion sont enregistrÃ©es</li>
    </ul>
    
    <h4>2. ğŸ›¡ï¸ Protection des DonnÃ©es</h4>
    
    <ul>
        <li><strong>SQL Injection Protection</strong> : 100% des requÃªtes utilisent PDO::prepare() avec paramÃ¨tres liÃ©s</li>
        <li><strong>Chiffrement HTTPS</strong> : Toutes les communications sont chiffrÃ©es</li>
        <li><strong>Soft Delete</strong> : Suppression logique pour rÃ©cupÃ©ration des donnÃ©es</li>
        <li><strong>Validation des donnÃ©es</strong> : Validation stricte cÃ´tÃ© serveur et client</li>
    </ul>
    
    <h3>ğŸ“Š Tableau RÃ©capitulatif des Droits par RÃ´le</h3>
    
    <p>Le systÃ¨me OTT utilise un systÃ¨me de permissions granulaires avec 3 rÃ´les principaux. Voici un rÃ©capitulatif complet des droits d'accÃ¨s pour chaque type d'utilisateur :</p>
    
    <table style="width: 100%; border-collapse: collapse; margin: 2rem 0; font-size: 0.95rem;">
        <thead>
            <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <th style="padding: 1rem; text-align: left; border: 1px solid #ddd;">FonctionnalitÃ© / Action</th>
                <th style="padding: 1rem; text-align: center; border: 1px solid #ddd;">ğŸ‘‘ Admin</th>
                <th style="padding: 1rem; text-align: center; border: 1px solid #ddd;">ğŸ‘¨â€âš•ï¸ MÃ©decin</th>
                <th style="padding: 1rem; text-align: center; border: 1px solid #ddd;">ğŸ”§ Technicien</th>
            </tr>
        </thead>
        <tbody>
            <tr style="background: #f8f9fa;">
                <td colspan="4" style="padding: 0.75rem; font-weight: bold; background: #e9ecef;">ğŸ“Š VUE D'ENSEMBLE</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Consulter le tableau de bord (KPI, graphiques)</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td colspan="4" style="padding: 0.75rem; font-weight: bold; background: #e9ecef;">ğŸ”Œ DISPOSITIFS</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Voir la liste des dispositifs</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Voir les dÃ©tails d'un dispositif (statut, batterie, historique)</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Modifier les informations d'un dispositif (nom, patient assignÃ©)</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">DÃ©clencher une mise Ã  jour OTA (Over-The-Air)</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Envoyer des commandes aux dispositifs (SET_SLEEP_SECONDS, PING, etc.)</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td colspan="4" style="padding: 0.75rem; font-weight: bold; background: #e9ecef;">ğŸ¥ PATIENTS</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Voir la liste des patients</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">CrÃ©er un nouveau patient</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Modifier les informations d'un patient</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Assigner un dispositif Ã  un patient</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
            </tr>
            <tr style="background: #f8f9fa;">
                <td colspan="4" style="padding: 0.75rem; font-weight: bold; background: #e9ecef;">ğŸ‘¥ UTILISATEURS</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">Voir la liste des utilisateurs</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">CrÃ©er un nouvel utilisateur</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border: 1px solid #ddd;">GÃ©rer les rÃ´les et permissions des utilisateurs</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âœ…</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
                <td style="padding: 0.75rem; text-align: center; border: 1px solid #ddd;">âŒ</td>
            </tr>
        </tbody>
    </table>
    
    <div class="alert alert-info" style="margin-top: 2rem;">
        <strong>ğŸ’¡ Note importante :</strong>
        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li><strong>Admin</strong> : AccÃ¨s complet Ã  toutes les fonctionnalitÃ©s. Seul rÃ´le pouvant gÃ©rer les utilisateurs et consulter l'audit.</li>
            <li><strong>MÃ©decin</strong> : AccÃ¨s en lecture/Ã©criture aux patients et dispositifs, mais pas aux fonctions techniques (OTA, commandes, firmware). Peut rÃ©soudre les alertes.</li>
            <li><strong>Technicien</strong> : AccÃ¨s technique complet (OTA, commandes, configuration, firmware) mais ne peut pas gÃ©rer les utilisateurs ni supprimer des patients/dispositifs.</li>
        </ul>
    </div>
</section>

<section id="roadmap" class="section">
    <h2>ğŸš€ Roadmap & AmÃ©liorations Futures</h2>
    
    <div class="alert alert-success">
        <strong>âœ… Version 3.3 (Actuelle - 2025)</strong><br>
        Version actuellement dÃ©ployÃ©e avec les fonctionnalitÃ©s suivantes :
        <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li>âœ… PWA installable (manifest.json, service worker)</li>
            <li>âœ… Streaming USB en temps rÃ©el avec UsbContext</li>
            <li>âœ… DÃ©tection automatique des dispositifs USB (Web Serial API)</li>
            <li>âœ… Dashboard React/Next.js complet avec authentification JWT</li>
            <li>âœ… Gestion multi-utilisateurs avec permissions granulaires</li>
            <li>âœ… API REST complÃ¨te avec PostgreSQL</li>
            <li>âœ… Mise Ã  jour OTA (Over-The-Air) du firmware</li>
            <li>âœ… Carte interactive Leaflet avec gÃ©olocalisation</li>
            <li>âœ… SystÃ¨me d'alertes et notifications</li>
        </ul>
    </div>
    
    <h3>ğŸ“… Version 3.4 (Q2-Q3 2025)</h3>
    
    <h4>ğŸ” SÃ©curitÃ© AvancÃ©e</h4>
    <ul>
        <li>âœ¨ Authentification 2FA (Google Authenticator, SMS)</li>
        <li>âœ¨ Rotation automatique JWT secrets (90 jours)</li>
        <li>âœ¨ Logs d'audit avancÃ©s avec alertes automatiques</li>
        <li>âœ¨ DÃ©tection d'activitÃ©s suspectes</li>
    </ul>
    
    <h4>ğŸ“± PWA AmÃ©liorÃ©e</h4>
    <ul>
        <li>âœ¨ Notifications Push natives</li>
        <li>âœ¨ Mode offline complet (sync automatique)</li>
        <li>âœ¨ IcÃ´nes PWA personnalisÃ©es</li>
        <li>âœ¨ Installable sur iOS sans restrictions</li>
    </ul>
    
    <h4>ğŸ“Š Analytics & BI</h4>
    <ul>
        <li>âœ¨ Dashboard analytics avancÃ©</li>
        <li>âœ¨ PrÃ©dictions ML (pannes, batteries)</li>
        <li>âœ¨ Export automatique vers Excel/PDF</li>
        <li>âœ¨ Rapports programmÃ©s (hebdo, mensuel)</li>
    </ul>
    
    <h3>ğŸ“… Version 3.5 (Q4 2025)</h3>
    
    <h4>ğŸŒ Internationalisation</h4>
    <ul>
        <li>âœ¨ Support multi-langues (EN, ES, DE)</li>
        <li>âœ¨ Timezone awareness complet</li>
        <li>âœ¨ Formats de date localisÃ©s</li>
    </ul>
    
    <h4>âš¡ Performance</h4>
    <ul>
        <li>âœ¨ Migration vers TypeScript</li>
        <li>âœ¨ Server-Side Rendering (SSR)</li>
        <li>âœ¨ Optimisation base de donnÃ©es (indices)</li>
        <li>âœ¨ CDN pour assets statiques</li>
    </ul>
    
    <h3>ğŸ“… Version 4.0 (Q4 2026)</h3>
    
    <h4>ğŸ¤– Intelligence Artificielle</h4>
    <ul>
        <li>âœ¨ DÃ©tection anomalies automatique (ML)</li>
        <li>âœ¨ Maintenance prÃ©dictive</li>
        <li>âœ¨ Chatbot support intÃ©grÃ©</li>
        <li>âœ¨ Recommandations personnalisÃ©es</li>
    </ul>
    
    <h4>ğŸ¥ ConformitÃ© MÃ©dicale</h4>
    <ul>
        <li>âœ¨ Certification CE MÃ©dical Classe IIa</li>
        <li>âœ¨ ConformitÃ© RGPD complÃ¨te (audit externe)</li>
        <li>âœ¨ HDS (HÃ©bergement DonnÃ©es de SantÃ©)</li>
        <li>âœ¨ ISO 13485 (QualitÃ© dispositifs mÃ©dicaux)</li>
    </ul>
</section>

</div>

<div class="footer">
    <p style="font-size: 1.3rem; margin-bottom: 0.5rem;"><strong>Â© 2025 HAPPLYZ MEDICAL SAS</strong></p>
    <p>OTT - Version 3.3 Enterprise | Documentation DÃ©veloppeurs</p>
    <p style="margin-top: 1rem; font-size: 1rem; font-weight: bold;">
        ğŸ“š Documentation :
        <a href="DOCUMENTATION_PRESENTATION.html" style="color: white; text-decoration: underline; margin: 0 0.5rem;">ğŸ“¸ PrÃ©sentation</a> | 
        <a href="DOCUMENTATION_DEVELOPPEURS.html" style="color: white; text-decoration: underline; margin: 0 0.5rem;">ğŸ’» DÃ©veloppeurs</a> | 
        <a href="DOCUMENTATION_COMMERCIALE.html" style="color: white; text-decoration: underline; margin: 0 0.5rem;">ğŸ’¼ Commerciale</a>
    </p>
    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
        ğŸŒ <a href="https://ymora.github.io/OTT/" style="color: white; text-decoration: underline;">Dashboard Live</a>
    </p>
</div>

</body>
</html>


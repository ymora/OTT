# ================================================================================
# Apache Configuration - OTT API
# ================================================================================

# Activer le moteur de réécriture + PATH_INFO
RewriteEngine On
AcceptPathInfo On

# Redirection racine vers index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^$ index.php [L]

# Forcer les routes api.php/... vers api.php avec PATH_INFO
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^api\.php/(.*)$ api.php/$1 [QSA,L]

# Garder les routes api.php directes intactes
RewriteCond %{REQUEST_URI} ^/api\.php$
RewriteRule ^ - [L]

# S'assurer que api.php est exécuté par PHP
<FilesMatch "^api\.php$">
    SetHandler application/x-httpd-php
</FilesMatch>

# Pour les fichiers statiques (dashboard, doc)
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Index directory listing désactivé
Options -Indexes


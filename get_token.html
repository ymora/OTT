<!DOCTYPE html>
<html>
<head>
    <title>R√©cup√©rer le Token JWT</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .token { background: #f5f5f5; padding: 10px; border-radius: 3px; word-break: break-all; font-family: monospace; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .instructions { background: #e7f3ff; padding: 15px; border-left: 4px solid #007bff; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>üîë R√©cup√©rer le Token JWT</h1>
    
    <div class="section">
        <h2>M√©thode 1 : Depuis cette page (Automatique)</h2>
        <p>Si vous √™tes connect√© au dashboard sur le m√™me navigateur :</p>
        <button onclick="copyToken()">üìã Copier le Token</button>
        <div id="result"></div>
    </div>
    
    <div class="section">
        <h2>M√©thode 2 : Depuis la Console du Navigateur</h2>
        <div class="instructions">
            <p><strong>√âtapes :</strong></p>
            <ol>
                <li>Ouvrez votre dashboard OTT (connect√©)</li>
                <li>Appuyez sur <kbd>F12</kbd> pour ouvrir les DevTools</li>
                <li>Allez dans l'onglet <strong>Console</strong></li>
                <li>Tapez cette commande et appuyez sur <kbd>Entr√©e</kbd> :</li>
            </ol>
            <div class="token">localStorage.getItem('ott_token')</div>
            <p style="margin-top: 10px;">Le token s'affichera. Copiez-le (sans les guillemets).</p>
        </div>
    </div>
    
    <div class="section">
        <h2>M√©thode 3 : Depuis l'Application (Storage)</h2>
        <div class="instructions">
            <p><strong>√âtapes :</strong></p>
            <ol>
                <li>Ouvrez votre dashboard OTT (connect√©)</li>
                <li>Appuyez sur <kbd>F12</kbd> pour ouvrir les DevTools</li>
                <li>Allez dans l'onglet <strong>Application</strong> (ou <strong>Stockage</strong>)</li>
                <li>Dans le menu de gauche, d√©veloppez <strong>Local Storage</strong></li>
                <li>Cliquez sur votre domaine (ex: <code>https://ymora.github.io</code> ou <code>http://localhost:3000</code>)</li>
                <li>Cherchez la cl√© <code>ott_token</code></li>
                <li>Double-cliquez sur la valeur pour la s√©lectionner et copiez-la</li>
            </ol>
        </div>
    </div>
    
    <div class="section">
        <h2>Token trouv√© :</h2>
        <div id="tokenDisplay" class="token" style="display: none;"></div>
        <button onclick="copyToClipboard()" id="copyBtn" style="display: none;">üìã Copier dans le presse-papier</button>
    </div>

    <script>
        function copyToken() {
            const token = localStorage.getItem('ott_token');
            const resultDiv = document.getElementById('result');
            const tokenDisplay = document.getElementById('tokenDisplay');
            const copyBtn = document.getElementById('copyBtn');
            
            if (token) {
                tokenDisplay.textContent = token;
                tokenDisplay.style.display = 'block';
                copyBtn.style.display = 'block';
                resultDiv.innerHTML = '<p class="success">‚úÖ Token trouv√© ! Il est affich√© ci-dessous.</p>';
            } else {
                resultDiv.innerHTML = '<p class="error">‚ùå Aucun token trouv√© dans localStorage. Assurez-vous d\'√™tre connect√© au dashboard sur le m√™me navigateur.</p>';
            }
        }
        
        function copyToClipboard() {
            const tokenDisplay = document.getElementById('tokenDisplay');
            const text = tokenDisplay.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const copyBtn = document.getElementById('copyBtn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = '‚úÖ Copi√© !';
                copyBtn.style.background = '#28a745';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '#007bff';
                }, 2000);
            }).catch(err => {
                alert('Erreur lors de la copie : ' + err);
            });
        }
        
        // Essayer de charger le token automatiquement au chargement
        window.addEventListener('load', () => {
            const token = localStorage.getItem('ott_token');
            if (token) {
                document.getElementById('tokenDisplay').textContent = token;
                document.getElementById('tokenDisplay').style.display = 'block';
                document.getElementById('copyBtn').style.display = 'block';
            }
        });
    </script>
</body>
</html>


"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2617],{2617:function(t,r,e){e.d(r,{fetchJson:function(){return n}});async function n(t,r,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};try{let c;let a=await t("".concat(r).concat(e),n,o);if(!a.ok){let t={},r=a.headers.get("content-type");if(r&&r.includes("application/json"))try{let r=await a.text();r&&r.trim()&&(t=JSON.parse(r))}catch(t){}throw Error(t.error||"Erreur HTTP ".concat(a.status))}let i=a.headers.get("content-type");if(!i||!i.includes("application/json")){let t=await a.text();if(!t||!t.trim())throw Error("R\xe9ponse vide de l'endpoint ".concat(e));throw Error("R\xe9ponse non-JSON de l'endpoint ".concat(e,": ").concat(t.substring(0,100)))}let s=await a.text();if(!s||!s.trim())throw Error("R\xe9ponse JSON vide de l'endpoint ".concat(e));try{c=JSON.parse(s)}catch(t){throw Error("R\xe9ponse JSON invalide de l'endpoint ".concat(e,": ").concat(t.message))}if(!c.success)throw Error(c.error||"Erreur API");return c}catch(t){if(t instanceof Error)throw t;throw Error(t.message||"Erreur lors de l'appel API")}}}}]);
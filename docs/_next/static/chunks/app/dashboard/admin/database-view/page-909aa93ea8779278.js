(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1563],{6510:function(e,t,s){Promise.resolve().then(s.bind(s,4506))},4506:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p},dynamic:function(){return o}});var r=s(7437),a=s(2265),l=s(9376),i=s(9999),c=s(5506),d=s(4767),n=s(832),x=s(9723);let o="force-dynamic";function p(){var e,t,s,o,p,h,m,y;let{user:u}=(0,i.a)();(0,l.useRouter)();let{isConnected:g,usbDeviceInfo:j,usbStreamLastMeasurement:b}=(0,d.l)(),[N,f]=(0,a.useState)("users"),{data:v,loading:k,error:_,refetch:w}=(0,c.m_)(["/api.php/users","/api.php/roles","/api.php/devices","/api.php/patients","/api.php/alerts","/api.php/firmwares","/api.php/audit?limit=100","/api.php/permissions"],{requiresAuth:!0});(0,c.w3)(w,3e4);let D=(null==v?void 0:null===(e=v.users)||void 0===e?void 0:e.users)||[],C=(null==v?void 0:null===(t=v.roles)||void 0===t?void 0:t.roles)||[],S=(null==v?void 0:null===(s=v.devices)||void 0===s?void 0:s.devices)||[],T=(null==v?void 0:null===(o=v.patients)||void 0===o?void 0:o.patients)||[],A=(null==v?void 0:null===(p=v.alerts)||void 0===p?void 0:p.alerts)||[],P=(null==v?void 0:null===(h=v.firmwares)||void 0===h?void 0:h.firmwares)||[],I=(null==v?void 0:null===(m=v.audit)||void 0===m?void 0:m.logs)||[],E=(null==v?void 0:null===(y=v.permissions)||void 0===y?void 0:y.permissions)||[],z=(0,a.useMemo)(()=>A.filter(e=>"unresolved"===e.status),[A]),F=(0,a.useMemo)(()=>{let e=S.filter(e=>{if(!e.last_seen)return!1;let t=new Date(e.last_seen);return!isNaN(t.getTime())&&(new Date-t)/36e5<2}),t=g&&j&&(j.sim_iccid||j.device_serial),s=!1;t&&(s=e.some(e=>j.sim_iccid&&e.sim_iccid===j.sim_iccid||j.device_serial&&e.device_serial===j.device_serial));let r=e.length+(t&&!s?1:0),a=S.filter(e=>{let t=e.last_battery;return null!=t&&t<30}).length,l=!1,i=!1;if(t&&j){var c,d;let e=null!==(d=null!==(c=null==b?void 0:b.battery)&&void 0!==c?c:j.battery)&&void 0!==d?d:j.last_battery;null!=e&&(l=e<30,i=e>=30)}let n=a+(l&&!s?1:0),x=S.filter(e=>null!=e.last_battery).filter(e=>e.last_battery>=30).length+(i&&!s?1:0),o=S.length+(t&&!s?1:0);return{totalUsers:D.length,activeUsers:D.filter(e=>e.is_active).length,totalDevices:o,activeDevices:r,totalPatients:T.length,totalAlerts:A.length,unresolvedAlerts:z.length,criticalAlerts:z.filter(e=>"critical"===e.severity).length,lowBatteryDevices:n,okBatteryDevices:x,totalFirmwares:P.length,totalAuditLogs:I.length}},[S,D,T,A,z,P,I,g,j,b]);(0,a.useMemo)(()=>S.filter(e=>!e.first_name&&!e.last_name),[S]);let R=(0,a.useMemo)(()=>S.filter(e=>{let t=e.last_battery;return null!=t&&t<30}),[S]);(0,a.useMemo)(()=>z.filter(e=>"critical"===e.severity||"high"===e.severity),[z]),(0,a.useMemo)(()=>R.slice(0,5),[R]);let L=[{id:"users",label:"\uD83D\uDC65 Utilisateurs",count:F.totalUsers},{id:"devices",label:"\uD83D\uDCF1 Dispositifs",count:F.totalDevices},{id:"patients",label:"\uD83C\uDFE5 Patients",count:F.totalPatients},{id:"roles",label:"\uD83D\uDD10 R\xf4les & Permissions",count:C.length},{id:"alerts",label:"⚠️ Alertes",count:F.totalAlerts},{id:"firmwares",label:"\uD83D\uDCBE Firmwares",count:F.totalFirmwares},{id:"audit",label:"\uD83D\uDCCB Audit",count:F.totalAuditLogs}],Z=e=>e?new Date(e).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",B=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Nom"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Email"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"T\xe9l\xe9phone"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"R\xf4le"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Permissions"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Statut"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Derni\xe8re connexion"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9 le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des utilisateurs..."})})}):0===D.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",className:"py-8 text-center text-gray-500",children:"Aucun utilisateur trouv\xe9"})}):D.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.phone||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",children:e.role_name})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.permissions?(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.permissions.split(",").filter(e=>e).slice(0,3).map((e,t)=>(0,r.jsx)("span",{className:"badge bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs",children:e},t)),e.permissions.split(",").filter(e=>e).length>3&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.permissions.split(",").filter(e=>e).length-3]})]}):"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.is_active?(0,r.jsx)("span",{className:"badge badge-success",children:"✅ Actif"}):(0,r.jsx)("span",{className:"badge bg-gray-100 text-gray-600",children:"❌ Inactif"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.last_login)}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})}),M=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Nom"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ICCID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"S\xe9rie"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Patient"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Statut"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Firmware"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Batterie"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"D\xe9bit"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Derni\xe8re vue"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"10",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des dispositifs..."})})}):0===S.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"10",className:"py-8 text-center text-gray-500",children:"Aucun dispositif trouv\xe9"})}):S.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4 font-medium",children:e.device_name||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm font-mono",children:e.sim_iccid||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.device_serial||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.patient_id?(0,r.jsxs)("span",{className:"text-sm",children:[e.first_name||""," ",e.last_name||""]}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge ".concat("active"===e.status?"badge-success":"inactive"===e.status?"bg-gray-100 text-gray-600":"bg-yellow-100 text-yellow-700"),children:e.status||"active"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.firmware_version||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:null!==e.last_battery?(0,r.jsxs)("span",{className:e.last_battery<20?"text-red-600 font-semibold":"",children:[e.last_battery.toFixed(1),"%"]}):"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:null!==e.last_flowrate&&void 0!==e.last_flowrate?"".concat(Number(e.last_flowrate).toFixed(2)," L/min"):"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.last_seen)})]},e.id))})]})}),U=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Nom"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Date de naissance"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"T\xe9l\xe9phone"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Email"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Ville"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Code postal"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9 le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des patients..."})})}):0===T.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Aucun patient trouv\xe9"})}):T.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsxs)("td",{className:"py-3 px-4 font-medium",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.birth_date||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.phone||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.email||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.city||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.postal_code||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})}),O=()=>(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"R\xf4les"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Nom"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Description"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Permissions"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9 le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des r\xf4les..."})})}):0===C.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"Aucun r\xf4le trouv\xe9"})}):C.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4 font-medium",children:(0,r.jsx)("span",{className:"badge bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:e.name})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.description||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.permissions?(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.permissions.split(",").filter(e=>e).map((e,t)=>(0,r.jsx)("span",{className:"badge bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs",children:e},t))}):"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Permissions"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Code"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Description"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cat\xe9gorie"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9 le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des permissions..."})})}):0===E.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"py-8 text-center text-gray-500",children:"Aucune permission trouv\xe9e"})}):E.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-sm",children:e.code}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.description||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300",children:e.category||"-"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})})]})]}),V=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Dispositif"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Type"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"S\xe9v\xe9rit\xe9"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Message"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Statut"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9e le"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"R\xe9solue le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des alertes..."})})}):0===A.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Aucune alerte trouv\xe9e"})}):A.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-sm",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.device_name||"Device #".concat(e.device_id)}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:e.type||"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge ".concat("critical"===e.severity?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"high"===e.severity?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"medium"===e.severity?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"),children:e.severity||"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.message||"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge ".concat("resolved"===e.status?"badge-success":"acknowledged"===e.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"),children:e.status||"unresolved"})}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.resolved_at)})]},e.id))})]})}),q=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Version"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Chemin fichier"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Taille"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Stable"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Statut"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Batterie min"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Cr\xe9\xe9 le"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des firmwares..."})})}):0===P.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"8",className:"py-8 text-center text-gray-500",children:"Aucun firmware trouv\xe9"})}):P.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4 font-medium font-mono",children:e.version}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.file_path||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:e.file_size?"".concat((e.file_size/1024).toFixed(2)," KB"):"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.is_stable?(0,r.jsx)("span",{className:"badge badge-success",children:"✅ Stable"}):(0,r.jsx)("span",{className:"badge bg-gray-100 text-gray-600",children:"❌ Beta"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge ".concat("compiled"===e.status?"badge-success":"compiling"===e.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"error"===e.status?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300"),children:e.status||"-"})}),(0,r.jsxs)("td",{className:"py-3 px-4",children:[e.min_battery_pct||"-","%"]}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})}),K=()=>(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Utilisateur"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Action"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Type entit\xe9"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"ID entit\xe9"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"IP"}),(0,r.jsx)("th",{className:"text-left py-3 px-4",children:"Date"})]})}),(0,r.jsx)("tbody",{children:k?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:(0,r.jsx)(n.Z,{size:"sm",text:"Chargement des logs d'audit..."})})}):0===I.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:"Aucun log d'audit trouv\xe9"})}):I.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.user_email?(0,r.jsx)("span",{className:"text-sm",children:e.user_email}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("span",{className:"badge bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 font-mono text-xs",children:e.action||"-"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.entity_type||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-sm",children:e.entity_id||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:e.ip_address||"-"}),(0,r.jsx)("td",{className:"py-3 px-4 text-sm",children:Z(e.created_at)})]},e.id))})]})});return(0,r.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"\uD83D\uDDC4️ Base de Donn\xe9es"})}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:L.map(e=>(0,r.jsxs)("button",{onClick:()=>f(e.id),className:"px-4 py-2 rounded-t-lg transition-colors ".concat(N===e.id?"bg-blue-500 text-white font-semibold":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[e.label," (",e.count,")"]},e.id))})}),(0,r.jsx)(x.Z,{error:_,onRetry:w}),(()=>{switch(N){case"users":default:return B();case"devices":return M();case"patients":return U();case"roles":return O();case"alerts":return V();case"firmwares":return q();case"audit":return K()}})()]})]})}},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,t,s){"use strict";var r,a;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(a=s.g.process)?void 0:a.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,r,a=e.exports={};function l(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var d=[],n=!1,x=-1;function o(){n&&r&&(n=!1,r.length?d=r.concat(d):x=-1,d.length&&p())}function p(){if(!n){var e=c(o);n=!0;for(var t=d.length;t;){for(r=d,d=[];++x<t;)r&&r[x].run();x=-1,t=d.length}r=null,n=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];d.push(new h(e,t)),1!==d.length||n||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},s={};function r(e){var a=s[e];if(void 0!==a)return a.exports;var l=s[e]={exports:{}},i=!0;try{t[e](l,l.exports,r),i=!1}finally{i&&delete s[e]}return l.exports}r.ab="//";var a=r(229);e.exports=a}()}},function(e){e.O(0,[2200,4767,2971,2117,1744],function(){return e(e.s=6510)}),_N_E=e.O()}]);
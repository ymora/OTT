@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fix z-index pour Leaflet - doit rester en arrière-plan des modals */
.leaflet-container {
  z-index: 1 !important;
}

.leaflet-control-container {
  z-index: 2 !important;
}

.leaflet-popup {
  z-index: 3 !important;
}

/* Animation de clignotement pour les marqueurs au survol */
.marker-pulse {
  animation: markerPulse 1s ease-in-out infinite;
}

@keyframes markerPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.15);
    opacity: 0.9;
  }
}

/* Style pour les marqueurs au survol */
.leaflet-marker-icon:hover,
.leaflet-marker-icon.marker-hovered {
  z-index: 1000 !important;
  filter: brightness(1.2);
  transition: all 0.2s ease;
}

/* Animation de zoom au survol via CSS (évite le re-render) */
.leaflet-marker-icon:hover .marker-dot,
.leaflet-marker-icon.marker-hovered .marker-dot {
  transform: scale(1.3);
  box-shadow: 0 0 12px rgba(0,0,0,0.6) !important;
}

.leaflet-marker-icon:hover .marker-label,
.leaflet-marker-icon.marker-hovered .marker-label {
  transform: scale(1.1);
}

:root {
  /* Couleurs primaires */
  --primary: 102 126 234;
  --secondary: 118 75 162;
  --success: 81 207 102;
  --warning: 255 165 0;
  --danger: 255 107 107;
  
  /* Mode nuit - Bleu nuit avec dégradés */
  --night-bg-start: 15 23 42;    /* slate-900 */
  --night-bg-mid: 30 41 59;      /* slate-800 */
  --night-bg-end: 51 65 85;      /* slate-700 */
  --night-blue-start: 30 58 138; /* blue-900 */
  --night-blue-mid: 37 99 235;   /* blue-600 */
  --night-blue-end: 59 130 246;  /* blue-500 */
  
  /* Textes mode nuit - toujours lisibles */
  --night-text-primary: 241 245 249;   /* slate-100 - très lisible */
  --night-text-secondary: 203 213 225;  /* slate-300 - lisible */
  --night-text-muted: 148 163 184;      /* slate-400 - discret mais lisible */
  
  /* Bordures et surfaces mode nuit */
  --night-border: 51 65 85;      /* slate-700 */
  --night-surface: 30 41 59;     /* slate-800 */
  --night-surface-hover: 51 65 85; /* slate-700 */
}

@layer base {
  body {
    @apply bg-gradient-to-br from-gray-50 via-white to-primary-50/30 dark:from-[rgb(var(--night-bg-start))] dark:via-[rgb(var(--night-bg-mid))] dark:to-[rgb(var(--night-blue-start))] text-gray-900 dark:text-[rgb(var(--night-text-primary))] transition-colors duration-300;
  }
}

@layer components {
  .card {
    @apply bg-gradient-to-br from-white to-gray-50/50 dark:from-[rgb(var(--night-surface))] dark:via-[rgb(var(--night-bg-mid))] dark:to-[rgb(var(--night-blue-start))]/20 rounded-xl shadow-sm border border-gray-100/80 dark:border-[rgb(var(--night-border))] p-6 transition-all duration-300 hover:shadow-lg hover:scale-[1.01] backdrop-blur-sm;
  }
  
  .btn-primary {
    @apply bg-gradient-to-r from-primary-500 to-primary-600 dark:from-primary-500 dark:to-primary-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:from-primary-600 hover:to-primary-700 dark:hover:from-primary-600 dark:hover:to-primary-700 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-secondary {
    @apply bg-gradient-to-r from-gray-100 to-gray-50 dark:from-[rgb(var(--night-surface))] dark:to-[rgb(var(--night-bg-mid))] text-gray-700 dark:text-[rgb(var(--night-text-primary))] px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:from-gray-200 hover:to-gray-100 dark:hover:from-[rgb(var(--night-surface-hover))] dark:hover:to-[rgb(var(--night-blue-start))]/30 hover:shadow-md hover:scale-[1.01] active:scale-[0.99];
  }
  
  .btn-danger {
    @apply bg-gradient-to-r from-red-500 to-red-600 dark:from-red-500 dark:to-red-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-300 hover:from-red-600 hover:to-red-700 dark:hover:from-red-600 dark:hover:to-red-700 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-all duration-200;
  }
  
  .badge-success {
    @apply bg-gradient-to-r from-green-100 to-green-50 dark:from-green-900/50 dark:to-green-800/40 text-green-700 dark:text-green-200 border border-green-200/50 dark:border-green-700/50;
  }
  
  .badge-warning {
    @apply bg-gradient-to-r from-orange-100 to-orange-50 dark:from-orange-900/50 dark:to-orange-800/40 text-orange-700 dark:text-orange-200 border border-orange-200/50 dark:border-orange-700/50;
  }
  
  .badge-danger {
    @apply bg-gradient-to-r from-red-100 to-red-50 dark:from-red-900/50 dark:to-red-800/40 text-red-700 dark:text-red-200 border border-red-200/50 dark:border-red-700/50;
  }
  
  .badge-info {
    @apply bg-gradient-to-r from-blue-100 to-blue-50 dark:from-[rgb(var(--night-blue-start))]/40 dark:to-[rgb(var(--night-blue-mid))]/30 text-blue-700 dark:text-blue-200 border border-blue-200/50 dark:border-blue-700/50;
  }
  
  .input {
    @apply w-full px-4 py-2 border border-gray-200/80 dark:border-[rgb(var(--night-border))] bg-white/80 dark:bg-[rgb(var(--night-surface))]/50 text-gray-900 dark:text-[rgb(var(--night-text-primary))] rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500/50 dark:focus:ring-[rgb(var(--night-blue-mid))]/50 focus:border-primary-500 dark:focus:border-[rgb(var(--night-blue-mid))] transition-all duration-200 backdrop-blur-sm;
  }
  
  /* Classes utilitaires pour les textes - utilisation des variables CSS */
  .text-primary {
    @apply text-gray-900 dark:text-[rgb(var(--night-text-primary))];
  }
  
  .text-secondary {
    @apply text-gray-600 dark:text-[rgb(var(--night-text-secondary))];
  }
  
  .text-muted {
    @apply text-gray-500 dark:text-[rgb(var(--night-text-muted))];
  }
  
  /* Classes pour les tableaux */
  .table-row {
    @apply border-b border-gray-100 dark:border-[rgb(var(--night-border))] hover:bg-gray-50 dark:hover:bg-[rgb(var(--night-surface-hover))] transition-colors;
  }
  
  .table-cell {
    @apply py-3 px-4 text-secondary;
  }
}

/* Animations personnalisées */
@keyframes shimmer {
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(to right, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
  background-size: 1000px 100%;
}

/* Animations discrètes et modernes */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-4px); }
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 5px rgba(102, 126, 234, 0.3); }
  50% { box-shadow: 0 0 15px rgba(102, 126, 234, 0.5); }
}

@keyframes slideInRight {
  0% { transform: translateX(10px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-glow {
  animation: glow 2s ease-in-out infinite;
}

.animate-slide-in-right {
  animation: slideInRight 0.3s ease-out;
}

/* Transitions douces pour les interactions */
* {
  transition-property: color, background-color, border-color, transform, opacity, box-shadow;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}

/* Smooth scroll */
html {
  scroll-behavior: smooth;
}

/* Scrollbar personnalisée pour les documentations */
.docs-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.3) rgba(0, 0, 0, 0.1);
}

.docs-scrollbar::-webkit-scrollbar {
  width: 12px;
}

.docs-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 6px;
}

.docs-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 6px;
}

.docs-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.5);
}

/* Dark mode pour scrollbar */
.dark .docs-scrollbar {
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
}

.dark .docs-scrollbar::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
}

.dark .docs-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
}

.dark .docs-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

